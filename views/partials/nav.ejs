<nav class="navbar navbar-expand-lg custom-navbar" data-bs-theme="light">
    <div class="container">
        <div class="row w-100 align-items-center">
            <!-- Sol tarafta linkler -->
            <div class="col d-flex justify-content-start">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/galeri">Galeri</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/hakkimizda">Hakkƒ±mƒ±zda</a>
                    </li>
                </ul>
            </div>

            <!-- Ortada logo -->
            <div class="col d-flex justify-content-center">
                <a class="navbar-brand" href="/anasayfa">
                    <img src="/images/logo.png" alt="Logo" width="50" height="50" class="d-inline-block align-text-top">
                </a>
            </div>

            <!-- Saƒü tarafta linkler, dil se√ßici ve login -->
            <div class="col d-flex justify-content-end align-items-center">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="/panel">Etkinlikler</a>
                    </li>
                    <li class="nav-item" id="etkinlikOnayPaneli">
                        <a class="nav-link" href="/etkinlikOnayPaneli">Etkinlik Onay Paneli</a>
                    </li>
                    <li class="nav-item" id="etkinlikOlustur">
                        <a class="nav-link" href="/etkinlik-olustur">Etkinlik Olu≈ütur</a>
                    </li>
                </ul>

                <!-- Kullanƒ±cƒ± bilgisi ve giri≈ü/√ßƒ±kƒ±≈ü -->
                <% if (loggedin) { %>
                    <span class="ms-3">
                        <%= username %>
                    </span>
                    <a href="/logout" class="btn btn-dark ms-3">√áƒ±kƒ±≈ü Yap</a>
                    <% } else { %>
                        <a href="/login" class="btn btn-dark ms-3">Giri≈ü Yap</a>
                        <% } %>

                            <div class="ms-3 d-flex align-items-center">
                                <label class="me-2">üåê Dil:</label>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="langRadio" id="tur" value="tr"
                                        onchange="setLang(this.value)">
                                    <label class="form-check-label" for="tur">TR</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="langRadio" id="en" value="en"
                                        onchange="setLang(this.value)">
                                    <label class="form-check-label" for="en">EN</label>
                                </div>
                            </div>

            </div>
        </div>
    </div>
</nav>

<script>
    // Kullanƒ±cƒ± t√ºr√ºne g√∂re butonlarƒ± g√∂ster/gizle
    fetch("/isAdmin", {
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        method: "POST",
    })
        .then(data => {
            if (data.redirected) {
                document.getElementById('etkinlikOnayPaneli')?.remove();
            }
        })
        .catch(err => console.error("Hata:", err));

    fetch("/isManager", {
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
        },
        method: "POST",
    })
        .then(data => {
            if (data.redirected) {
                document.getElementById('etkinlikOlustur')?.remove();
            }
        })
        .catch(err => console.error("Hata:", err));

    var lang = "<%= lang %>"; // backend'den gelen aktif dil

    if (lang === "en") {
        document.getElementById("en").checked = true;
    } else if (lang === "tr") {
        document.getElementById("tur").checked = true;
    }

    function setLang(lang) {
        fetch('/update-lang', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ lang: lang })
        })
            .then(response => {
                if (response.ok) {
                    window.location.reload();
                } else {
                    console.log('Dil tercihi g√ºncellenemedi');
                }
            })
            .catch(error => console.error('Hata:', error));
    }
</script>