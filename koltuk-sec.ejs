<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Koltuk SeÃ§imi</title>
    <link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.min.css" />
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', sans-serif;
        }

        .seat {
            width: 50px;
            height: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            line-height: 50px;
            padding: 0;
            border-radius: 5px;
            border: none;
            color: white;
            margin: 5px;
            /* ðŸ‘ˆ ARAYA BOÅžLUK KOYDUK */
        }

        .available {
            background-color: #198754;
        }

        .selected {
            background-color: #0d6efd;
        }

        .unavailable {
            background-color: #dc3545;
            pointer-events: none;
        }

        .seat-row {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            /* ðŸ‘ˆ kÃ¼Ã§Ã¼k ekranda taÅŸÄ±yor gibi olursa alta geÃ§sin */
        }


        .action-buttons {
            margin-top: 30px;
        }
    </style>
</head>

<body class="d-flex flex-column min-vh-100">
    <%- include('partials/nav') %>

        <div class="container text-center">
            <h2 class="mb-4">Koltuk SeÃ§imi</h2>

            <form action="/bilet-onayla" method="POST" onsubmit="prepareSeats()">
                <div id="seat-grid" class="mb-4">
                    <!-- Koltuklar burada oluÅŸturulacak -->
                </div>

                <input type="hidden" name="selectedSeats" id="selectedSeats" />

                <div class="action-buttons">
                    <button type="submit" class="btn btn-success me-2">Onayla</button>
                    <a href="/" class="btn btn-secondary">Ä°ptal</a>
                </div>
            </form>
        </div>

        <script>
            const rows = 5;
            const cols = 8;
            const seatGrid = document.getElementById("seat-grid");
            const selected = [];

            const unavailableSeats = ["B3", "B4", "C5", "D1"]; // dolu olanlar Ã¶rnek

            function createGrid() {
                for (let r = 1; r <= rows; r++) {
                    const rowDiv = document.createElement("div");
                    rowDiv.className = "seat-row";

                    for (let c = 1; c <= cols; c++) {
                        const rowChar = String.fromCharCode(64 + r); // 1 -> A
                        const seatId = `${rowChar}${c}`;

                        const btn = document.createElement("button");
                        btn.type = "button";
                        btn.className = "seat available";
                        btn.textContent = seatId;

                        if (unavailableSeats.includes(seatId)) {
                            btn.classList.remove("available");
                            btn.classList.add("unavailable");
                        }

                        btn.addEventListener("click", () => {
                            if (btn.classList.contains("selected")) {
                                btn.classList.remove("selected");
                                selected.splice(selected.indexOf(seatId), 1);
                            } else {
                                btn.classList.add("selected");
                                selected.push(seatId);
                            }
                        });

                        rowDiv.appendChild(btn);
                    }

                    seatGrid.appendChild(rowDiv);
                }
            }

            function prepareSeats() {
                document.getElementById("selectedSeats").value = JSON.stringify(selected);
            }

            createGrid();
        </script>

        <%- include('partials/footer') %>

</body>

</html>